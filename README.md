# 멀티 쓰레드 grep

- Rust 기반 grep 프로그램
- 복수의 파일에 대해 검색 작업을 수행하는 경우, 쓰레드풀을 생성하여 개별 파일을 각 쓰레드에서 동시에 처리

## 명령어 설치 방법 (MacOs)

프로그램 다운로드 및 퍼미션 변경

```bash
curl -o /usr/local/bin/grep-rs 'https://raw.githubusercontent.com/bugoverdose/grep-rs/main/target/debug/grep-rs'
chmod 755 /usr/local/bin/grep-rs
```

사용방법

```bash
grep-rs search-keyword relative-path
```

프로그램 제거 

```bash
rm -rf /usr/local/bin/grep-rs
```

## 기능 및 동작원리

- 프로그램 실행 시점에 두 개의 인자(keyword, path)를 받는다.
    - 인자의 개수가 두 개보다 적거나 많은 경우, 예외 메시지를 출력하며 프로그램을 종료한다.

- path에 해당되는 파일이 존재하는 경우, 해당 파일에서 keyword에 해당되는 줄을 찾아 출력한다.

- path에 해당되는 디렉토리가 존재하는 경우, 디렉토리 내 모든 파일에 대해 검사를 진행한다.
    - 복수의 쓰레드에서 개별 파일을 맡아 동시에 작업을 수행한다.
    - 쓰레드풀을 구현하여 최대 10개의 쓰레드만을 생성하여 재사용한다.
    - 동시에 수행해야 하는 작업이 적은 경우, 불필요한 쓰레드는 생성하지 않는다.
    - 해당 디렉토리 내부에 또 다른 디렉토리가 존재하는 경우, 위의 작업을 반복한다.

- 검색 대상 파일이 하나인 경우, 쓰레드풀을 생성하지 않고 즉시 검색 작업을 수행한다.

## 예외처리

- 검색 대상에 텍스트로 구성되지 않은 파일이 포함된 경우, 프로그램을 종료하지 않고 해당 파일에 대한 검색에 실패했음을 출력한다.
- path에 해당되는 파일 및 디렉토리가 존재하지 않는 경우, 예외 메시지를 출력하며 프로그램을 종료한다.
- path가 가리키는 디렉토리 내부에 파일이 없는 경우, 예외 메시지를 출력하며 프로그램을 종료한다.
